var API={section_height:0,section_pos:"#home",scroll_mark:!0,setSize:function(a){$(a).css("height",window.innerHeight),$(a).css("width",window.innerWidth)},getPorperty:function(a){var b,c,d;switch(a){case"#home":b=0,c="Lorem Ipsum 2014",d="/";break;case"#gallery":b=1,c="Lorem Ipsum 2014 / Gallery",d="/gallery/";break;case"#info":b=2,c="Lorem Ipsum 2014 / Info",d="/info/"}return{pos:b,title:c,url:d}},doAction:function(a,b){if(a){var b="#"+$("#"+b).next()[0].id;if("#pot"==b)return}else{if(!$(API.section_pos).prev()[0])return;var b="#"+$(API.section_pos).prev()[0].id}var c=API.getPorperty(b);API.sectionMove(c.pos*API.section_height),API.section_pos=b,API.pushUrl(c.title,c.url,c.pos)},sectionMove:function(a,b){var b=b||function(){};$("body, html").animate({scrollTop:a},700,"easeInOutQuint",function(){b()})},pushUrl:function(a,b,c){history.pushState({pos:c,title:a},a,b),document.title=a}};API.tapPlot=function(a,b,c){$(a).hammer({prevent_default:!0}).on("tap",function(a){var d=a.position[0].x,e=a.position[0].y;$(b).css({visibility:"visible",width:"30px",height:"30px",left:d-15+"px",top:e-15+"px",opacity:.4}).animate({height:"40px",width:"40px",opacity:0,left:"-=5px",top:"-=5px"},300,function(){$(b).css("visibility","hidden")}),c(a.target.id)})},$(function(){function a(){API.section_height=window.innerHeight,API.setSize("#home, #gallery, #info"),""!=API.section_pos&&API.sectionMove(API.getPorperty(API.section_pos).pos*API.section_height)}API.tapPlot("#pot"),a(),$(window).resize(function(){setTimeout(a,0)}),API.tapPlot("#home, #gallery, #info","#pot",function(a){API.doAction(!0,a)}),$(document).keydown(function(a){40==a.keyCode&&API.doAction(!0,API.section_pos.split("#")[1]),38==a.keyCode&&API.doAction(!1,API.section_pos.split("#")[1])}),$("#home, #gallery, #info").on("mousewheel DOMMouseScroll",function(a){a.preventDefault();var b=a.originalEvent.wheelDelta||-1*a.originalEvent.detail;API.scroll_mark&&(API.scroll_mark=!1,0>b&&API.doAction(!0,API.section_pos.split("#")[1]),b>0&&API.doAction(!1,API.section_pos.split("#")[1]),setTimeout(function(){API.scroll_mark=!0},1e3))}),window.addEventListener("popstate",function(){var a=window.location.pathname;a=a.substring(1,a.length-1),"/"==a&&(a="home");var b=API.getPorperty("#"+a);API.sectionMove(b.pos*API.section_height,function(){document.title=b.title})})});